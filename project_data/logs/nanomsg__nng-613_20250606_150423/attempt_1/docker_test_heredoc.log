=== METHOD: HEREDOC ===
=== AI PATCH PREVIEW ===
    diff --git a/src/nng.c b/src/nng.c
index abc1234..def5678 100644
--- a/src/nng.c
+++ b/src/nng.c
@@ -120,6 +120,9 @@ nng_recvmsg(nng_socket s, nng_msg **msgp, int flags)
 	if ((rv = nng_aio_result(ap)) == 0) {
 		*msgp = nng_aio_get_msg(ap);
 
+	} else if (rv == NNG_ECLOSED) {
+		rv = NNG_ECONNRESET;


=== TEST EXECUTION ===
error: patch fragment without header at line 110: @@ -138,6 +144,10 @@ nng_recv_aio(nng_socket s, nng_aio *aio)
